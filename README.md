# 🏰 Dungeon Rescue - 3D Visualization

A 3D interactive visualization of the classic **Dungeon Princess** problem, built with Three.js. This application visualizes the optimal path for a knight to rescue a princess from a dungeon while managing health points and navigating through rooms with different effects.

## 🎮 Demo

<video width="600" controls>
  <source src="https://github.com/TiagoSD22/dungeon_crawler/blob/master/dungeon_crawler_demo.mp4?raw=true" type="video/mp4">
  Your browser does not support the video tag.
</video>

*Watch the knight navigate through the dungeon to rescue the princess!*

## 🎯 The Problem

The Dungeon Princess problem is a classic dynamic programming challenge where:

- A knight must rescue a princess trapped in the bottom-right corner of a dungeon
- The knight starts from the top-left corner with a certain amount of health points (HP)
- Each room in the dungeon contains either:
  - **Threats** (negative values) - reduce the knight's HP
  - **Power-ups** (positive values) - increase the knight's HP  
  - **Neutral rooms** (zero values) - no effect on HP
- The knight must maintain positive HP throughout the journey
- The goal is to find the minimum initial HP required to successfully reach the princess

## 🔧 Data Source

This visualization uses data generated by the [Dungeon Solver](https://github.com/TiagoSD22/dungeon_solver) project, which implements the algorithm to solve the Dungeon Princess problem and outputs:

- The dungeon grid with room values
- The optimal path from start to finish
- The minimum HP required for the journey

The `dungeon.json` file contains:
```json
{
  "input": [
    [-2, -3, 3],
    [-5, -10, 1], 
    [10, 30, -5]
  ],
  "path": [[0,0], [0,1], [0,2], [1,2], [2,2]],
  "min_hp": 7
}
```

## 🎨 Features

### Visual Elements
- **🟥 Red Rooms**: Threat rooms (negative values) that damage the knight
- **🟩 Green Rooms**: Power-up rooms (positive values) that heal the knight
- **⬜ Gray Rooms**: Neutral rooms (zero values) with no effect
- **🛡️ Cyan Knight**: 3D cylinder representing the brave knight
- **👸 Pink Princess**: 3D cone representing the princess to be rescued
- **Grid Lines**: White semi-transparent lines for better room visibility

### Interactive Controls
- **Play Button**: Start/restart the rescue mission animation
- **Smooth Animation**: Knight moves smoothly between rooms with easing effects
- **Bounce Effect**: Knight bounces slightly while moving for dynamic visualization
- **Legend**: Color-coded reference for all visual elements

### Technical Features
- **3D Rendering**: Built with Three.js for smooth 3D graphics
- **Responsive Design**: Adapts to different screen sizes
- **Modern ES6**: Uses ES modules and modern JavaScript features
- **Hot Reload**: Development server with instant updates

## 🚀 Setup and Installation

### Prerequisites
- Node.js (version 14 or higher)
- npm (comes with Node.js)

### Installation Steps

1. **Clone or download this repository**

2. **Navigate to the project directory**
   ```bash
   cd dungeon_crawler
   ```

3. **Install dependencies**
   ```bash
   npm install
   ```

4. **Start the development server**
   ```bash
   npm start
   ```

5. **Open your browser** and navigate to `http://localhost:3000`

## 📜 Available Scripts

- `npm start` or `npm run dev` - Start development server with hot reload
- `npm run build` - Build optimized version for production
- `npm run preview` - Preview the production build locally

## 🏗️ Project Structure

```
dungeon_crawler/
├── app.js              # Main application logic and Three.js setup
├── index.html          # HTML entry point with UI controls
├── dungeon.json        # Dungeon data (grid, path, min HP)
├── package.json        # Dependencies and npm scripts
├── vite.config.js      # Vite development server configuration
├── .gitignore          # Git ignore patterns
└── README.md           # This file
```

## 🔄 How to Use Different Dungeon Data

1. **Generate new data** using the [Dungeon Solver](https://github.com/TiagoSD22/dungeon_solver)
2. **Replace the content** of `dungeon.json` with your new data
3. **Refresh the browser** - the visualization will automatically update
4. **Click "Start Rescue Mission"** to see the new path animation

### Example Custom Dungeon
```json
{
  "input": [
    [-3, 5, 1, 3],
    [-3, 5, 1, 3],
    [-3, 5, 1, 3],
    [1, -3, 1, 0]
  ],
  "path": [[0,0], [0,1], [1,1], [2,1], [3,1], [3,2], [3,3]],
  "min_hp": 4
}
```

## 🛠️ Technologies Used

- **[Three.js](https://threejs.org/)** - 3D graphics library for WebGL rendering
- **[Vite](https://vitejs.dev/)** - Fast build tool and development server
- **ES6 Modules** - Modern JavaScript module system
- **HTML5 Canvas** - For 3D rendering context
- **CSS3** - Styling and responsive design

## 🎯 Algorithm Visualization

This project visualizes the solution to the dynamic programming problem where:

1. **State**: `dp[i][j]` = minimum HP needed to reach position `(i,j)` and continue to the end
2. **Transition**: The knight can move right or down from each position
3. **Base Case**: At the princess location, minimum HP = `max(1, 1 - dungeon[i][j])`
4. **Optimal Path**: Traced back from the solution using the computed minimum HP values

The visualization shows this optimal path in action, demonstrating how the knight navigates through threats and power-ups while maintaining the minimum required health.

## 🤝 Contributing

Feel free to fork this project and submit pull requests for improvements! Some ideas for enhancements:

- Add sound effects for movement and room interactions
- Implement multiple difficulty levels
- Add HP counter visualization during movement
- Create different knight and princess character models
- Add particle effects for power-ups and threats

## 📄 License

This project is licensed under the MIT License - see the LICENSE file for details.

## 🙏 Acknowledgments

- [Dungeon Solver](https://github.com/TiagoSD22/dungeon_solver) for the algorithm implementation and data generation
- [Three.js](https://threejs.org/) community for the excellent 3D graphics library
- Classic dynamic programming problem from competitive programming challenges
